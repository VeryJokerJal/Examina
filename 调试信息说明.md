# 综合实训和专项训练按钮逻辑调试信息

## 添加的调试信息位置

### 1. ViewModel层调试信息

#### ComprehensiveTrainingListViewModel
- **构造函数**: 输出ViewModel初始化过程
- **StartButtonText属性**: 每次访问时输出HasFullAccess状态
- **CanStartTraining方法**: 输出权限和试做支持检查结果
- **StartTrainingAsync方法**: 详细输出权限检查和试做支持检查过程
- **数据加载**: 输出每个训练的EnableTrial状态
- **权限更新**: 输出权限状态变化

#### SpecializedTrainingListViewModel
- 与综合实训相同的调试信息

### 2. 服务层调试信息

#### StudentComprehensiveTrainingService
- **MapToStudentComprehensiveTrainingDto**: 输出EnableTrial属性映射过程
- **GetAvailableTrainingsAsync**: 输出数据库查询结果中的EnableTrial状态

#### StudentSpecializedTrainingService
- 与综合实训服务相同的调试信息

### 3. UI层调试信息

#### DebugMultiValueConverter
- 新增的调试转换器，用于监控按钮IsEnabled绑定的值
- 输出HasFullAccess和EnableTrial的绑定值以及最终结果

## 调试信息标签说明

- `[ComprehensiveTraining]`: 综合实训相关调试信息
- `[SpecializedTraining]`: 专项训练相关调试信息
- `[ComprehensiveTrainingService]`: 综合实训服务层调试信息
- `[SpecializedTrainingService]`: 专项训练服务层调试信息
- `[DebugConverter]`: UI绑定调试信息

## 如何查看调试信息

1. 在Visual Studio中打开"输出"窗口
2. 选择"调试"输出源
3. 运行应用程序并导航到综合实训或专项训练页面
4. 查看控制台输出的调试信息

## 关键检查点

1. **数据库EnableTrial值**: 检查数据库中的EnableTrial字段是否正确设置
2. **服务层映射**: 检查EnableTrial属性是否正确从数据库实体映射到DTO
3. **ViewModel权限状态**: 检查HasFullAccess属性是否正确
4. **UI绑定**: 检查按钮IsEnabled绑定是否接收到正确的值
5. **按钮状态**: 检查最终的按钮启用/禁用状态

## 预期的调试输出示例

```
[ComprehensiveTraining] ViewModel构造函数开始
[ComprehensiveTraining] 开始初始化用户权限状态
[ComprehensiveTraining] 开始初始数据加载
[ComprehensiveTrainingService] 数据库查询结果: 训练名称, EnableTrial: True
[ComprehensiveTrainingService] 映射训练: 训练名称, EnableTrial: True -> True
[ComprehensiveTraining] 加载训练: 训练名称, EnableTrial: True
[ComprehensiveTraining] StartButtonText被访问 - HasFullAccess: True
[DebugConverter] HasFullAccess: True, EnableTrial: True, Result: True
```

## 故障排除

如果按钮仍然不能正常工作，请检查以下调试输出：

1. EnableTrial在数据库查询时是否为True
2. EnableTrial在服务层映射时是否正确传递
3. HasFullAccess在ViewModel中是否为True
4. DebugConverter是否接收到正确的绑定值
5. 最终的按钮IsEnabled结果是否正确
