<Window x:Class="Examina.Views.Dialogs.FormalExamRulesDialog" xmlns="https://github.com/avaloniaui" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:d="http://schemas.microsoft.com/expression/blend/2008" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" xmlns:vm="using:Examina.ViewModels.Dialogs" Title="上机统考规则说明" Width="600" Height="800" d:DesignHeight="800" d:DesignWidth="600" x:DataType="vm:FormalExamRulesViewModel" CanResize="False" WindowStartupLocation="CenterOwner" mc:Ignorable="d">

    <Design.DataContext>
        <vm:FormalExamRulesViewModel />
    </Design.DataContext>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <!--  主内容区域  -->
        <ScrollViewer Grid.Row="0" Padding="24" VerticalScrollBarVisibility="Auto">
            <StackPanel Spacing="20">

                <!--  标题区域  -->
                <StackPanel Spacing="8">
                    <TextBlock HorizontalAlignment="Center" FontSize="24" FontWeight="Bold" Foreground="{DynamicResource SystemAccentColor}" Text="🎓 上机统考规则说明" />
                    <TextBlock HorizontalAlignment="Center" FontSize="14" Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}" Text="请仔细阅读以下规则，确认无误后开始考试" />
                </StackPanel>

                <!--  考试基本信息  -->
                <Border Padding="20" Background="{DynamicResource SystemControlBackgroundAltHighBrush}" BorderBrush="{DynamicResource SystemControlForegroundBaseLowBrush}" BorderThickness="1" CornerRadius="8">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="*" />
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>

                        <TextBlock Grid.Row="0" Grid.ColumnSpan="2" Margin="0,0,0,12" FontSize="16" FontWeight="SemiBold" Foreground="{DynamicResource SystemAccentColor}" Text="📊 考试基本信息" />

                        <StackPanel Grid.Row="1" Grid.Column="0" Spacing="4">
                            <TextBlock FontWeight="SemiBold" Text="考试时长" />
                            <TextBlock FontSize="18" FontWeight="Bold" Foreground="{DynamicResource SystemAccentColor}" Text="{Binding RulesInfo.DurationMinutes, StringFormat={}{0} 分钟}" />
                        </StackPanel>

                        <StackPanel Grid.Row="1" Grid.Column="1" Spacing="4">
                            <TextBlock FontWeight="SemiBold" Text="总分值" />
                            <TextBlock FontSize="18" FontWeight="Bold" Foreground="{DynamicResource SystemAccentColor}" Text="{Binding RulesInfo.TotalScore, StringFormat={}{0} 分}" />
                        </StackPanel>

                        <StackPanel Grid.Row="2" Grid.Column="0" Margin="0,8,0,0" Spacing="4">
                            <TextBlock FontWeight="SemiBold" Text="及格分数" />
                            <TextBlock FontSize="18" FontWeight="Bold" Foreground="#FF4CAF50" Text="{Binding RulesInfo.PassingScore, StringFormat={}{0} 分}" />
                        </StackPanel>

                        <StackPanel Grid.Row="2" Grid.Column="1" Margin="0,8,0,0" Spacing="4">
                            <TextBlock FontWeight="SemiBold" Text="题目总数" />
                            <TextBlock FontSize="18" FontWeight="Bold" Foreground="#FF4CAF50" Text="{Binding RulesInfo.TotalQuestions, StringFormat={}{0} 道}" />
                        </StackPanel>

                        <StackPanel Grid.Row="3" Grid.Column="0" Margin="0,8,0,0" Spacing="4">
                            <TextBlock FontWeight="SemiBold" Text="编程题" />
                            <TextBlock FontSize="14" Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}" Text="{Binding RulesInfo.ProgrammingQuestions, StringFormat={}{0} 道 × 15分}" />
                        </StackPanel>

                        <StackPanel Grid.Row="3" Grid.Column="1" Margin="0,8,0,0" Spacing="4">
                            <TextBlock FontWeight="SemiBold" Text="操作题" />
                            <TextBlock FontSize="14" Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}" Text="{Binding RulesInfo.OperationQuestions, StringFormat={}{0} 道 × 5分}" />
                        </StackPanel>
                    </Grid>
                </Border>

                <!--  考试规则  -->
                <Border Padding="20" Background="{DynamicResource SystemControlBackgroundAltHighBrush}" BorderBrush="{DynamicResource SystemControlForegroundBaseLowBrush}" BorderThickness="1" CornerRadius="8">
                    <StackPanel Spacing="12">
                        <TextBlock FontSize="16" FontWeight="SemiBold" Foreground="{DynamicResource SystemAccentColor}" Text="📋 考试规则" />
                        <ItemsControl ItemsSource="{Binding RulesInfo.Rules}">
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <StackPanel Margin="0,4" Orientation="Horizontal" Spacing="8">
                                        <TextBlock Margin="0,2,0,0" VerticalAlignment="Top" FontWeight="Bold" Foreground="{DynamicResource SystemAccentColor}" Text="•" />
                                        <TextBlock VerticalAlignment="Top" Text="{Binding}" TextWrapping="Wrap" />
                                    </StackPanel>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>
                    </StackPanel>
                </Border>

                <!--  考试要求  -->
                <Border Padding="20" Background="#FFF3E0" BorderBrush="#FFCC02" BorderThickness="1" CornerRadius="8">
                    <StackPanel Spacing="12">
                        <TextBlock FontSize="16" FontWeight="SemiBold" Foreground="#FF8F00" Text="⚠️ 考试要求" />
                        <ItemsControl ItemsSource="{Binding RulesInfo.Requirements}">
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <StackPanel Margin="0,4" Orientation="Horizontal" Spacing="8">
                                        <TextBlock Margin="0,2,0,0" VerticalAlignment="Top" FontWeight="Bold" Foreground="#FF8F00" Text="•" />
                                        <TextBlock VerticalAlignment="Top" Foreground="#E65100" Text="{Binding}" TextWrapping="Wrap" />
                                    </StackPanel>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>
                    </StackPanel>
                </Border>

                <!--  注意事项  -->
                <Border Padding="20" Background="#FFEBEE" BorderBrush="#F44336" BorderThickness="1" CornerRadius="8">
                    <StackPanel Spacing="12">
                        <TextBlock FontSize="16" FontWeight="SemiBold" Foreground="#D32F2F" Text="⚠️ 重要注意事项" />
                        <ItemsControl ItemsSource="{Binding RulesInfo.Notes}">
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <StackPanel Margin="0,4" Orientation="Horizontal" Spacing="8">
                                        <TextBlock Margin="0,2,0,0" VerticalAlignment="Top" FontWeight="Bold" Foreground="#D32F2F" Text="•" />
                                        <TextBlock VerticalAlignment="Top" Foreground="#B71C1C" Text="{Binding}" TextWrapping="Wrap" />
                                    </StackPanel>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>
                    </StackPanel>
                </Border>

                <!--  操作指南  -->
                <Border Padding="20" Background="{DynamicResource SystemControlBackgroundAltHighBrush}" BorderBrush="{DynamicResource SystemControlForegroundBaseLowBrush}" BorderThickness="1" CornerRadius="8">
                    <StackPanel Spacing="12">
                        <TextBlock FontSize="16" FontWeight="SemiBold" Foreground="{DynamicResource SystemAccentColor}" Text="💡 操作指南" />
                        <ItemsControl ItemsSource="{Binding RulesInfo.OperationGuide}">
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <StackPanel Margin="0,4" Orientation="Horizontal" Spacing="8">
                                        <TextBlock Margin="0,2,0,0" VerticalAlignment="Top" FontWeight="Bold" Foreground="{DynamicResource SystemAccentColor}" Text="•" />
                                        <TextBlock VerticalAlignment="Top" Text="{Binding}" TextWrapping="Wrap" />
                                    </StackPanel>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>
                    </StackPanel>
                </Border>

            </StackPanel>
        </ScrollViewer>

        <!--  底部按钮区域  -->
        <Border Grid.Row="1" Background="{DynamicResource SystemControlBackgroundChromeMediumLowBrush}" BorderBrush="{DynamicResource SystemControlForegroundBaseLowBrush}" BorderThickness="0,1,0,0">
            <StackPanel Margin="24,16" HorizontalAlignment="Right" Orientation="Horizontal" Spacing="12">
                <Button Name="CancelButton" MinWidth="80" Padding="20,8" Click="CancelButton_Click" Content="取消" />
                <Button Name="ConfirmButton" MinWidth="100" Padding="20,8" Classes="accent" Click="ConfirmButton_Click" Content="确认开始" />
            </StackPanel>
        </Border>
    </Grid>
</Window>
