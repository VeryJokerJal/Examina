<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:vm="using:Examina.ViewModels.Dialogs"
        mc:Ignorable="d" d:DesignWidth="600" d:DesignHeight="800"
        x:Class="Examina.Views.Dialogs.FormalExamRulesDialog"
        x:DataType="vm:FormalExamRulesViewModel"
        Title="ä¸Šæœºç»Ÿè€ƒè§„åˆ™è¯´æ˜Ž"
        Width="600" Height="800"
        MinWidth="500" MinHeight="700"
        WindowStartupLocation="CenterOwner"
        CanResize="true">

    <Design.DataContext>
        <vm:FormalExamRulesViewModel />
    </Design.DataContext>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- ä¸»å†…å®¹åŒºåŸŸ -->
        <ScrollViewer Grid.Row="0" Padding="24" VerticalScrollBarVisibility="Auto">
            <StackPanel Spacing="20">
                
                <!-- æ ‡é¢˜åŒºåŸŸ -->
                <StackPanel Spacing="8">
                    <TextBlock Text="ðŸŽ“ ä¸Šæœºç»Ÿè€ƒè§„åˆ™è¯´æ˜Ž" 
                               FontSize="24" 
                               FontWeight="Bold" 
                               HorizontalAlignment="Center"
                               Foreground="{DynamicResource SystemAccentColor}"/>
                    <TextBlock Text="è¯·ä»”ç»†é˜…è¯»ä»¥ä¸‹è§„åˆ™ï¼Œç¡®è®¤æ— è¯¯åŽå¼€å§‹è€ƒè¯•" 
                               FontSize="14" 
                               HorizontalAlignment="Center"
                               Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}"/>
                </StackPanel>

                <!-- è€ƒè¯•åŸºæœ¬ä¿¡æ¯ -->
                <Border Background="{DynamicResource SystemControlBackgroundAltHighBrush}"
                        CornerRadius="8" Padding="20" BorderBrush="{DynamicResource SystemControlForegroundBaseLowBrush}"
                        BorderThickness="1">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>

                        <TextBlock Grid.Row="0" Grid.ColumnSpan="2" Text="ðŸ“Š è€ƒè¯•åŸºæœ¬ä¿¡æ¯" FontSize="16" FontWeight="SemiBold" 
                                   Foreground="{DynamicResource SystemAccentColor}" Margin="0,0,0,12"/>

                        <StackPanel Grid.Row="1" Grid.Column="0" Spacing="4">
                            <TextBlock Text="è€ƒè¯•æ—¶é•¿" FontWeight="SemiBold"/>
                            <TextBlock Text="{Binding RulesInfo.DurationMinutes, StringFormat='{0} åˆ†é’Ÿ'}" FontSize="18" FontWeight="Bold" Foreground="{DynamicResource SystemAccentColor}"/>
                        </StackPanel>

                        <StackPanel Grid.Row="1" Grid.Column="1" Spacing="4">
                            <TextBlock Text="æ€»åˆ†å€¼" FontWeight="SemiBold"/>
                            <TextBlock Text="{Binding RulesInfo.TotalScore, StringFormat='{0} åˆ†'}" FontSize="18" FontWeight="Bold" Foreground="{DynamicResource SystemAccentColor}"/>
                        </StackPanel>

                        <StackPanel Grid.Row="2" Grid.Column="0" Spacing="4" Margin="0,8,0,0">
                            <TextBlock Text="åŠæ ¼åˆ†æ•°" FontWeight="SemiBold"/>
                            <TextBlock Text="{Binding RulesInfo.PassingScore, StringFormat='{0} åˆ†'}" FontSize="18" FontWeight="Bold" Foreground="#FF4CAF50"/>
                        </StackPanel>

                        <StackPanel Grid.Row="2" Grid.Column="1" Spacing="4" Margin="0,8,0,0">
                            <TextBlock Text="é¢˜ç›®æ€»æ•°" FontWeight="SemiBold"/>
                            <TextBlock Text="{Binding RulesInfo.TotalQuestions, StringFormat='{0} é“'}" FontSize="18" FontWeight="Bold" Foreground="#FF4CAF50"/>
                        </StackPanel>

                        <StackPanel Grid.Row="3" Grid.Column="0" Spacing="4" Margin="0,8,0,0">
                            <TextBlock Text="ç¼–ç¨‹é¢˜" FontWeight="SemiBold"/>
                            <TextBlock Text="{Binding RulesInfo.ProgrammingQuestions, StringFormat='{0} é“ Ã— 15åˆ†'}" FontSize="14" Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}"/>
                        </StackPanel>

                        <StackPanel Grid.Row="3" Grid.Column="1" Spacing="4" Margin="0,8,0,0">
                            <TextBlock Text="æ“ä½œé¢˜" FontWeight="SemiBold"/>
                            <TextBlock Text="{Binding RulesInfo.OperationQuestions, StringFormat='{0} é“ Ã— 5åˆ†'}" FontSize="14" Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}"/>
                        </StackPanel>
                    </Grid>
                </Border>

                <!-- è€ƒè¯•è§„åˆ™ -->
                <Border Background="{DynamicResource SystemControlBackgroundAltHighBrush}"
                        CornerRadius="8" Padding="20" BorderBrush="{DynamicResource SystemControlForegroundBaseLowBrush}"
                        BorderThickness="1">
                    <StackPanel Spacing="12">
                        <TextBlock Text="ðŸ“‹ è€ƒè¯•è§„åˆ™" FontSize="16" FontWeight="SemiBold" Foreground="{DynamicResource SystemAccentColor}"/>
                        <ItemsControl ItemsSource="{Binding RulesInfo.Rules}">
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <StackPanel Orientation="Horizontal" Spacing="8" Margin="0,4">
                                        <TextBlock Text="â€¢" FontWeight="Bold" Foreground="{DynamicResource SystemAccentColor}" VerticalAlignment="Top" Margin="0,2,0,0"/>
                                        <TextBlock Text="{Binding}" TextWrapping="Wrap" VerticalAlignment="Top"/>
                                    </StackPanel>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>
                    </StackPanel>
                </Border>

                <!-- è€ƒè¯•è¦æ±‚ -->
                <Border Background="#FFF3E0" CornerRadius="8" Padding="20" BorderBrush="#FFCC02" BorderThickness="1">
                    <StackPanel Spacing="12">
                        <TextBlock Text="âš ï¸ è€ƒè¯•è¦æ±‚" FontSize="16" FontWeight="SemiBold" Foreground="#FF8F00"/>
                        <ItemsControl ItemsSource="{Binding RulesInfo.Requirements}">
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <StackPanel Orientation="Horizontal" Spacing="8" Margin="0,4">
                                        <TextBlock Text="â€¢" FontWeight="Bold" Foreground="#FF8F00" VerticalAlignment="Top" Margin="0,2,0,0"/>
                                        <TextBlock Text="{Binding}" TextWrapping="Wrap" VerticalAlignment="Top" Foreground="#E65100"/>
                                    </StackPanel>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>
                    </StackPanel>
                </Border>

                <!-- æ³¨æ„äº‹é¡¹ -->
                <Border Background="#FFEBEE" CornerRadius="8" Padding="20" BorderBrush="#F44336" BorderThickness="1">
                    <StackPanel Spacing="12">
                        <TextBlock Text="âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹" FontSize="16" FontWeight="SemiBold" Foreground="#D32F2F"/>
                        <ItemsControl ItemsSource="{Binding RulesInfo.Notes}">
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <StackPanel Orientation="Horizontal" Spacing="8" Margin="0,4">
                                        <TextBlock Text="â€¢" FontWeight="Bold" Foreground="#D32F2F" VerticalAlignment="Top" Margin="0,2,0,0"/>
                                        <TextBlock Text="{Binding}" TextWrapping="Wrap" VerticalAlignment="Top" Foreground="#B71C1C"/>
                                    </StackPanel>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>
                    </StackPanel>
                </Border>

                <!-- æ“ä½œæŒ‡å— -->
                <Border Background="{DynamicResource SystemControlBackgroundAltHighBrush}"
                        CornerRadius="8" Padding="20" BorderBrush="{DynamicResource SystemControlForegroundBaseLowBrush}"
                        BorderThickness="1">
                    <StackPanel Spacing="12">
                        <TextBlock Text="ðŸ’¡ æ“ä½œæŒ‡å—" FontSize="16" FontWeight="SemiBold" Foreground="{DynamicResource SystemAccentColor}"/>
                        <ItemsControl ItemsSource="{Binding RulesInfo.OperationGuide}">
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <StackPanel Orientation="Horizontal" Spacing="8" Margin="0,4">
                                        <TextBlock Text="â€¢" FontWeight="Bold" Foreground="{DynamicResource SystemAccentColor}" VerticalAlignment="Top" Margin="0,2,0,0"/>
                                        <TextBlock Text="{Binding}" TextWrapping="Wrap" VerticalAlignment="Top"/>
                                    </StackPanel>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>
                    </StackPanel>
                </Border>

            </StackPanel>
        </ScrollViewer>

        <!-- åº•éƒ¨æŒ‰é’®åŒºåŸŸ -->
        <Border Grid.Row="1" Background="{DynamicResource SystemControlBackgroundChromeMediumLowBrush}" 
                BorderBrush="{DynamicResource SystemControlForegroundBaseLowBrush}" BorderThickness="0,1,0,0">
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Spacing="12" Margin="24,16">
                <Button Name="CancelButton" Content="å–æ¶ˆ" Padding="20,8" MinWidth="80" Click="CancelButton_Click"/>
                <Button Name="ConfirmButton" Content="ç¡®è®¤å¼€å§‹" Padding="20,8" MinWidth="100" Classes="accent" Click="ConfirmButton_Click"/>
            </StackPanel>
        </Border>
    </Grid>
</Window>
