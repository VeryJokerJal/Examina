<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:vm="using:Examina.ViewModels.Dialogs"
        mc:Ignorable="d" d:DesignWidth="500" d:DesignHeight="700"
        x:Class="Examina.Views.Dialogs.ExamResultWindow"
        x:DataType="vm:ExamResultViewModel"
        Title="è€ƒè¯•ç»“æžœ"
        Width="500" Height="700"
        MinWidth="450" MinHeight="600"
        WindowStartupLocation="CenterScreen"
        CanResize="false"
        WindowState="Maximized"
        ExtendClientAreaToDecorationsHint="True"
        ExtendClientAreaChromeHints="NoChrome"
        ExtendClientAreaTitleBarHeightHint="0">

    <Design.DataContext>
        <vm:ExamResultViewModel />
    </Design.DataContext>

    <!-- å…¨å±äºšå…‹åŠ›èƒŒæ™¯ -->
    <Panel>
        <!-- äºšå…‹åŠ›èƒŒæ™¯ -->
        <Border Background="#80000000" />
        
        <!-- æ¨¡ç³ŠèƒŒæ™¯æ•ˆæžœ -->
        <Border>
            <Border.Background>
                <LinearGradientBrush StartPoint="0%,0%" EndPoint="100%,100%">
                    <GradientStop Color="#40000000" Offset="0"/>
                    <GradientStop Color="#60000000" Offset="0.5"/>
                    <GradientStop Color="#40000000" Offset="1"/>
                </LinearGradientBrush>
            </Border.Background>
        </Border>

        <!-- ä¸»å†…å®¹åŒºåŸŸ -->
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- å†…å®¹åŒºåŸŸ -->
            <ScrollViewer Grid.Row="0" HorizontalAlignment="Center" VerticalAlignment="Center">
                <Border Background="#F0FFFFFF" 
                        CornerRadius="20" 
                        Padding="40" 
                        MaxWidth="450"
                        BoxShadow="0 20 60 0 #40000000">
                    <StackPanel Spacing="24">
                        
                        <!-- æ ‡é¢˜åŒºåŸŸ -->
                        <StackPanel Spacing="8" HorizontalAlignment="Center">
                            <TextBlock Text="ðŸŽ“" FontSize="48" HorizontalAlignment="Center"/>
                            <TextBlock Text="è€ƒè¯•å®Œæˆ" 
                                       FontSize="28" 
                                       FontWeight="Bold" 
                                       HorizontalAlignment="Center"
                                       Foreground="#333333"/>
                            <TextBlock Text="{Binding ExamTypeText}" 
                                       FontSize="16" 
                                       HorizontalAlignment="Center"
                                       Foreground="#666666"/>
                        </StackPanel>

                        <!-- è€ƒè¯•ä¿¡æ¯ -->
                        <Border Background="#F8F9FA" CornerRadius="12" Padding="20">
                            <StackPanel Spacing="12">
                                <TextBlock Text="ðŸ“‹ è€ƒè¯•ä¿¡æ¯" FontSize="16" FontWeight="SemiBold" Foreground="#333333"/>
                                
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                    </Grid.RowDefinitions>

                                    <TextBlock Grid.Row="0" Grid.Column="0" Text="è€ƒè¯•åç§°ï¼š" FontWeight="SemiBold" Margin="0,0,8,8"/>
                                    <TextBlock Grid.Row="0" Grid.Column="1" Text="{Binding ExamName}" TextWrapping="Wrap" Margin="0,0,0,8"/>
                                    
                                    <TextBlock Grid.Row="1" Grid.Column="0" Text="å®žé™…ç”¨æ—¶ï¼š" FontWeight="SemiBold" Margin="0,0,8,0"/>
                                    <TextBlock Grid.Row="1" Grid.Column="1" Text="{Binding ActualDurationText}"/>
                                </Grid>
                            </StackPanel>
                        </Border>

                        <!-- æäº¤çŠ¶æ€ -->
                        <Border Background="#F8F9FA" CornerRadius="12" Padding="20">
                            <StackPanel Spacing="12">
                                <TextBlock Text="ðŸ“¤ æäº¤çŠ¶æ€" FontSize="16" FontWeight="SemiBold" Foreground="#333333"/>
                                
                                <StackPanel Orientation="Horizontal" Spacing="8">
                                    <TextBlock Text="{Binding SubmissionStatusIcon}" FontSize="20"/>
                                    <TextBlock Text="{Binding SubmissionStatusText}" 
                                               FontSize="18" 
                                               FontWeight="Bold" 
                                               Foreground="{Binding SubmissionStatusColor}"/>
                                </StackPanel>
                            </StackPanel>
                        </Border>

                        <!-- æˆç»©ä¿¡æ¯ -->
                        <Border Background="#F8F9FA" CornerRadius="12" Padding="20" IsVisible="{Binding IsSubmissionSuccessful}">
                            <StackPanel Spacing="16">
                                <TextBlock Text="ðŸ“Š è€ƒè¯•æˆç»©" FontSize="16" FontWeight="SemiBold" Foreground="#333333"/>
                                
                                <!-- å¾—åˆ†æ˜¾ç¤º -->
                                <StackPanel Spacing="8" HorizontalAlignment="Center">
                                    <TextBlock Text="{Binding ScoreText}" 
                                               FontSize="32" 
                                               FontWeight="Bold" 
                                               HorizontalAlignment="Center"
                                               Foreground="#2196F3"/>
                                    <TextBlock Text="{Binding ScoreRateText}" 
                                               FontSize="18" 
                                               FontWeight="SemiBold" 
                                               HorizontalAlignment="Center"
                                               Foreground="#666666"/>
                                </StackPanel>

                                <!-- é€šè¿‡çŠ¶æ€ -->
                                <Border Background="{Binding PassStatusColor}" 
                                        CornerRadius="20" 
                                        Padding="12,6" 
                                        HorizontalAlignment="Center">
                                    <TextBlock Text="{Binding PassStatusText}" 
                                               FontSize="14" 
                                               FontWeight="Bold" 
                                               Foreground="White"
                                               HorizontalAlignment="Center"/>
                                </Border>
                            </StackPanel>
                        </Border>

                        <!-- é”™è¯¯ä¿¡æ¯ -->
                        <Border Background="#FFEBEE" 
                                CornerRadius="12" 
                                Padding="20" 
                                BorderBrush="#F44336" 
                                BorderThickness="1"
                                IsVisible="{Binding HasError}">
                            <StackPanel Spacing="8">
                                <TextBlock Text="âš ï¸ é”™è¯¯ä¿¡æ¯" FontSize="16" FontWeight="SemiBold" Foreground="#D32F2F"/>
                                <TextBlock Text="{Binding ErrorMessage}" 
                                           TextWrapping="Wrap" 
                                           Foreground="#B71C1C"/>
                            </StackPanel>
                        </Border>

                        <!-- å¤‡æ³¨ä¿¡æ¯ -->
                        <Border Background="#E8F5E8" 
                                CornerRadius="12" 
                                Padding="20" 
                                BorderBrush="#4CAF50" 
                                BorderThickness="1"
                                IsVisible="{Binding HasNotes}">
                            <StackPanel Spacing="8">
                                <TextBlock Text="ðŸ’¡ å¤‡æ³¨ä¿¡æ¯" FontSize="16" FontWeight="SemiBold" Foreground="#2E7D32"/>
                                <TextBlock Text="{Binding Notes}" 
                                           TextWrapping="Wrap" 
                                           Foreground="#1B5E20"/>
                            </StackPanel>
                        </Border>

                        <!-- æç¤ºä¿¡æ¯ -->
                        <Border Background="#FFF3E0" CornerRadius="12" Padding="16" BorderBrush="#FF9800" BorderThickness="1">
                            <StackPanel Spacing="8">
                                <TextBlock Text="ðŸ“ æ¸©é¦¨æç¤º" FontSize="14" FontWeight="SemiBold" Foreground="#E65100"/>
                                <TextBlock Text="è€ƒè¯•ç»“æžœå·²ä¿å­˜ï¼Œæ‚¨å¯ä»¥åœ¨æˆç»©æŸ¥è¯¢é¡µé¢æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯ã€‚" 
                                           TextWrapping="Wrap" 
                                           FontSize="12"
                                           Foreground="#BF360C"/>
                            </StackPanel>
                        </Border>

                    </StackPanel>
                </Border>
            </ScrollViewer>

            <!-- åº•éƒ¨ç¡®è®¤æŒ‰é’® -->
            <Border Grid.Row="1" 
                    Background="#E0FFFFFF" 
                    Padding="20"
                    HorizontalAlignment="Center">
                <Button Name="ConfirmButton" 
                        Content="ç¡®è®¤è¿”å›ž" 
                        Padding="32,12" 
                        FontSize="16"
                        FontWeight="SemiBold"
                        Background="#2196F3"
                        Foreground="White"
                        CornerRadius="25"
                        BorderThickness="0"
                        Click="ConfirmButton_Click">
                    <Button.Styles>
                        <Style Selector="Button:pointerover">
                            <Setter Property="Background" Value="#1976D2"/>
                        </Style>
                        <Style Selector="Button:pressed">
                            <Setter Property="Background" Value="#0D47A1"/>
                        </Style>
                    </Button.Styles>
                </Button>
            </Border>
        </Grid>
    </Panel>
</Window>
