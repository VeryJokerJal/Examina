<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:vm="clr-namespace:Examina.ViewModels.Pages"
             mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="600"
             x:Class="Examina.Views.Pages.SchoolBindingView"
             x:DataType="vm:SchoolBindingViewModel">

  <ScrollViewer>
    <StackPanel Margin="24" Spacing="24" MaxWidth="600">
      
      <!-- 页面标题 -->
      <TextBlock Text="{Binding PageTitle}" 
                 FontSize="28" 
                 FontWeight="Bold"
                 FontFamily="Microsoft YaHei"
                 Foreground="{DynamicResource SystemControlForegroundBaseHighBrush}"/>
      
      <!-- 当前绑定状态 -->
      <Border Background="{DynamicResource SystemControlBackgroundChromeMediumLowBrush}"
              CornerRadius="8"
              Padding="20"
              IsVisible="{Binding IsSchoolBound}">
        <StackPanel Spacing="12">
          <TextBlock Text="当前绑定学校" 
                     FontSize="16" 
                     FontWeight="SemiBold"
                     FontFamily="Microsoft YaHei"
                     Foreground="{DynamicResource SystemControlForegroundBaseHighBrush}"/>
          <TextBlock Text="{Binding CurrentSchool}" 
                     FontSize="14"
                     FontFamily="Microsoft YaHei"
                     Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}"/>
          <Button Content="解绑学校" 
                  Command="{Binding UnbindSchoolCommand}"
                  Classes="danger"
                  HorizontalAlignment="Left"
                  Padding="16,8"
                  FontFamily="Microsoft YaHei"/>
        </StackPanel>
      </Border>
      
      <!-- 绑定学校表单 -->
      <Border Background="{DynamicResource SystemControlBackgroundChromeMediumLowBrush}"
              CornerRadius="8"
              Padding="20"
              IsVisible="{Binding !IsSchoolBound}">
        <StackPanel Spacing="16">
          <TextBlock Text="绑定学校" 
                     FontSize="18" 
                     FontWeight="SemiBold"
                     FontFamily="Microsoft YaHei"
                     Foreground="{DynamicResource SystemControlForegroundBaseHighBrush}"/>
          
          <StackPanel Spacing="8">
            <TextBlock Text="学校代码" 
                       FontSize="14"
                       FontFamily="Microsoft YaHei"
                       Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}"/>
            <TextBox Text="{Binding SchoolCode}" 
                     Watermark="请输入学校代码"
                     FontFamily="Microsoft YaHei"/>
          </StackPanel>
          
          <StackPanel Orientation="Horizontal" Spacing="12">
            <Button Content="搜索学校" 
                    Command="{Binding SearchSchoolCommand}"
                    Padding="16,8"
                    FontFamily="Microsoft YaHei"/>
            <Button Content="绑定学校" 
                    Command="{Binding BindSchoolCommand}"
                    Classes="accent"
                    IsVisible="{Binding !IsSchoolBound}"
                    Padding="16,8"
                    FontFamily="Microsoft YaHei"/>
          </StackPanel>
          
          <TextBlock Text="{Binding SchoolName}" 
                     FontSize="14"
                     FontFamily="Microsoft YaHei"
                     Foreground="{DynamicResource SystemControlForegroundBaseHighBrush}"
                     IsVisible="{Binding SchoolName, Converter={x:Static StringConverters.IsNotNullOrEmpty}}"/>
        </StackPanel>
      </Border>
      
      <!-- 状态消息 -->
      <TextBlock Text="{Binding StatusMessage}" 
                 FontSize="14"
                 FontFamily="Microsoft YaHei"
                 Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}"
                 IsVisible="{Binding StatusMessage, Converter={x:Static StringConverters.IsNotNullOrEmpty}}"/>
      
    </StackPanel>
  </ScrollViewer>
</UserControl>
