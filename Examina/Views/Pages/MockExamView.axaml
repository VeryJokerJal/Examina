<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:vm="using:Examina.ViewModels.Pages"
             xmlns:models="using:Examina.Models.MockExam"
             mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="450"
             x:Class="Examina.Views.Pages.MockExamView"
             x:DataType="vm:MockExamViewModel">

    <Design.DataContext>
        <vm:MockExamViewModel />
    </Design.DataContext>

    <Grid RowDefinitions="Auto,*">
        <!-- 标题栏 -->
        <Border Grid.Row="0" Background="{DynamicResource SystemAccentColor}" Padding="20,15">
            <StackPanel Orientation="Horizontal">
                <TextBlock Text="🎯" FontSize="24" VerticalAlignment="Center" Margin="0,0,10,0"/>
                <TextBlock Text="模拟考试" FontSize="20" FontWeight="Bold" Foreground="White" VerticalAlignment="Center"/>
                <TextBlock Text="智能题库随机抽取，真实考试体验"
                          FontSize="14" Foreground="White" Opacity="0.8"
                          VerticalAlignment="Center" Margin="20,0,0,0"/>
            </StackPanel>
        </Border>

        <!-- 主内容区域 -->
        <Grid Grid.Row="1" Margin="40">
            <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center" Spacing="30" MaxWidth="600">
                <!-- 错误消息 -->
                <Border IsVisible="{Binding ErrorMessage, Converter={x:Static StringConverters.IsNotNullOrEmpty}}"
                        Background="#FFEBEE" BorderBrush="#F44336" BorderThickness="1"
                        CornerRadius="5" Padding="15">
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="⚠️" FontSize="16" VerticalAlignment="Center" Margin="0,0,10,0"/>
                        <TextBlock Text="{Binding ErrorMessage}" Foreground="#D32F2F" VerticalAlignment="Center"/>
                    </StackPanel>
                </Border>

                <!-- 模拟考试介绍 -->
                <StackPanel Spacing="20" HorizontalAlignment="Center">
                    <TextBlock Text="🎯" FontSize="80" HorizontalAlignment="Center" Opacity="0.8"/>
                    <TextBlock Text="模拟考试系统" FontSize="28" FontWeight="Bold" HorizontalAlignment="Center"/>
                    <TextBlock Text="基于综合训练题库的智能抽题系统，为您提供真实的考试体验"
                              FontSize="16" HorizontalAlignment="Center" TextAlignment="Center"
                              Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}"/>
                </StackPanel>

                <!-- 功能特色 -->
                <Border Background="{DynamicResource SystemControlBackgroundAltHighBrush}"
                        CornerRadius="12" Padding="30" BorderBrush="{DynamicResource SystemControlForegroundBaseLowBrush}"
                        BorderThickness="1">
                    <StackPanel Spacing="20">
                        <TextBlock Text="✨ 功能特色" FontSize="18" FontWeight="SemiBold" HorizontalAlignment="Center"
                                  Foreground="{DynamicResource SystemAccentColor}"/>

                        <Grid ColumnDefinitions="*,*" RowDefinitions="Auto,Auto,Auto" ColumnSpacing="30" RowSpacing="15">
                            <StackPanel Grid.Row="0" Grid.Column="0" Orientation="Horizontal" Spacing="10">
                                <TextBlock Text="🎲" FontSize="18"/>
                                <StackPanel>
                                    <TextBlock Text="智能随机抽题" FontWeight="SemiBold"/>
                                    <TextBlock Text="从题库中随机抽取题目" FontSize="12" Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}"/>
                                </StackPanel>
                            </StackPanel>

                            <StackPanel Grid.Row="0" Grid.Column="1" Orientation="Horizontal" Spacing="10">
                                <TextBlock Text="⏱️" FontSize="18"/>
                                <StackPanel>
                                    <TextBlock Text="真实考试体验" FontWeight="SemiBold"/>
                                    <TextBlock Text="2小时限时考试" FontSize="12" Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}"/>
                                </StackPanel>
                            </StackPanel>

                            <StackPanel Grid.Row="1" Grid.Column="0" Orientation="Horizontal" Spacing="10">
                                <TextBlock Text="📊" FontSize="18"/>
                                <StackPanel>
                                    <TextBlock Text="科学分值分配" FontWeight="SemiBold"/>
                                    <TextBlock Text="编程题+操作题组合" FontSize="12" Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}"/>
                                </StackPanel>
                            </StackPanel>

                            <StackPanel Grid.Row="1" Grid.Column="1" Orientation="Horizontal" Spacing="10">
                                <TextBlock Text="💾" FontSize="18"/>
                                <StackPanel>
                                    <TextBlock Text="自动保存进度" FontWeight="SemiBold"/>
                                    <TextBlock Text="防止意外丢失答案" FontSize="12" Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}"/>
                                </StackPanel>
                            </StackPanel>

                            <StackPanel Grid.Row="2" Grid.Column="0" Orientation="Horizontal" Spacing="10">
                                <TextBlock Text="📈" FontSize="18"/>
                                <StackPanel>
                                    <TextBlock Text="详细成绩报告" FontWeight="SemiBold"/>
                                    <TextBlock Text="考后分析与建议" FontSize="12" Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}"/>
                                </StackPanel>
                            </StackPanel>

                            <StackPanel Grid.Row="2" Grid.Column="1" Orientation="Horizontal" Spacing="10">
                                <TextBlock Text="🔒" FontSize="18"/>
                                <StackPanel>
                                    <TextBlock Text="公平公正" FontWeight="SemiBold"/>
                                    <TextBlock Text="每次抽题都不相同" FontSize="12" Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}"/>
                                </StackPanel>
                            </StackPanel>
                        </Grid>
                    </StackPanel>
                </Border>

                <!-- 开始按钮 -->
                <StackPanel Spacing="15" HorizontalAlignment="Center">
                    <Button Command="{Binding StartMockExamCommand}"
                            Classes="accent"
                            FontSize="18"
                            Padding="40,15"
                            MinWidth="200"
                            IsEnabled="{Binding !IsLoading}">
                        <Button.Content>
                            <StackPanel Orientation="Horizontal" Spacing="10">
                                <TextBlock Text="🚀" FontSize="20" IsVisible="{Binding HasFullAccess}"/>
                                <TextBlock Text="🔒" FontSize="20" IsVisible="{Binding !HasFullAccess}"/>
                                <TextBlock Text="{Binding StartButtonText}" FontWeight="SemiBold"/>
                            </StackPanel>
                        </Button.Content>
                    </Button>

                    <TextBlock Text="点击开始后将显示考试规则说明"
                              FontSize="12" HorizontalAlignment="Center"
                              Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}"/>
                </StackPanel>

                <!-- 加载指示器 -->
                <Border IsVisible="{Binding IsLoading}"
                        Background="{DynamicResource SystemControlBackgroundAltHighBrush}"
                        CornerRadius="5" Padding="20">
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                        <TextBlock Text="🔄" FontSize="16" Margin="0,0,10,0" VerticalAlignment="Center"/>
                        <TextBlock Text="正在生成模拟考试..." VerticalAlignment="Center"/>
                    </StackPanel>
                </Border>
            </StackPanel>
        </Grid>
    </Grid>
</UserControl>
