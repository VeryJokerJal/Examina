<UserControl x:Class="Examina.Views.Pages.ChangePasswordView" 
             xmlns="https://github.com/avaloniaui" 
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:vm="clr-namespace:Examina.ViewModels.Pages" 
             d:DesignHeight="500" 
             d:DesignWidth="450" 
             x:DataType="vm:ChangePasswordViewModel" 
             mc:Ignorable="d">

    <Border Background="{DynamicResource SystemControlBackgroundChromeMediumLowBrush}" 
            BorderBrush="{DynamicResource SystemControlForegroundBaseLowBrush}"
            BorderThickness="1"
            CornerRadius="12" 
            Padding="32"
            MaxWidth="400">
        <StackPanel Spacing="24">
            
            <!-- æ ‡é¢˜ -->
            <StackPanel Spacing="8" HorizontalAlignment="Center">
                <TextBlock FontFamily="Microsoft YaHei" 
                          FontSize="24" 
                          FontWeight="Bold" 
                          HorizontalAlignment="Center"
                          Foreground="{DynamicResource SystemControlForegroundBaseHighBrush}" 
                          Text="ðŸ”’ ä¿®æ”¹å¯†ç " />
                <TextBlock FontFamily="Microsoft YaHei" 
                          FontSize="14" 
                          HorizontalAlignment="Center"
                          Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}" 
                          Text="ä¸ºäº†æ‚¨çš„è´¦æˆ·å®‰å…¨ï¼Œè¯·è®¾ç½®ä¸€ä¸ªå¼ºå¯†ç " />
            </StackPanel>

            <!-- å½“å‰å¯†ç  -->
            <StackPanel Spacing="8">
                <TextBlock FontFamily="Microsoft YaHei"
                          FontSize="14"
                          FontWeight="Medium"
                          Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}"
                          Text="å½“å‰å¯†ç " />
                <TextBox FontFamily="Microsoft YaHei"
                        FontSize="14"
                        Height="40"
                        Padding="12,8"
                        PasswordChar="â—"
                        Text="{Binding CurrentPassword}"
                        Watermark="è¯·è¾“å…¥å½“å‰å¯†ç "/>
                <TextBlock FontFamily="Microsoft YaHei"
                          FontSize="12"
                          Foreground="Red"
                          Text="{Binding CurrentPasswordError}"
                          IsVisible="{Binding CurrentPasswordError, Converter={x:Static StringConverters.IsNotNullOrEmpty}}" />
                <TextBlock FontFamily="Microsoft YaHei"
                          FontSize="12"
                          Foreground="Green"
                          Text="âœ“ æ”¯æŒéªŒè¯å½“å‰å¯†ç ï¼Œç¡®ä¿è´¦æˆ·å®‰å…¨" />
            </StackPanel>

            <!-- æ–°å¯†ç  -->
            <StackPanel Spacing="8">
                <TextBlock FontFamily="Microsoft YaHei" 
                          FontSize="14" 
                          FontWeight="Medium"
                          Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}" 
                          Text="æ–°å¯†ç " />
                <TextBox FontFamily="Microsoft YaHei" 
                        FontSize="14"
                        Height="40"
                        Padding="12,8"
                        PasswordChar="â—"
                        Text="{Binding NewPassword}" 
                        Watermark="è¯·è¾“å…¥æ–°å¯†ç "/>
                <TextBlock FontFamily="Microsoft YaHei" 
                          FontSize="12" 
                          Foreground="Red" 
                          Text="{Binding NewPasswordError}"
                          IsVisible="{Binding NewPasswordError, Converter={x:Static StringConverters.IsNotNullOrEmpty}}" />
                <TextBlock FontFamily="Microsoft YaHei" 
                          FontSize="12" 
                          Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}" 
                          Text="å¯†ç é•¿åº¦6-20ä½ï¼Œå¿…é¡»åŒ…å«å­—æ¯å’Œæ•°å­—" />
            </StackPanel>

            <!-- ç¡®è®¤æ–°å¯†ç  -->
            <StackPanel Spacing="8">
                <TextBlock FontFamily="Microsoft YaHei" 
                          FontSize="14" 
                          FontWeight="Medium"
                          Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}" 
                          Text="ç¡®è®¤æ–°å¯†ç " />
                <TextBox FontFamily="Microsoft YaHei" 
                        FontSize="14"
                        Height="40"
                        Padding="12,8"
                        PasswordChar="â—"
                        Text="{Binding ConfirmPassword}" 
                        Watermark="è¯·å†æ¬¡è¾“å…¥æ–°å¯†ç "/>
                <TextBlock FontFamily="Microsoft YaHei" 
                          FontSize="12" 
                          Foreground="Red" 
                          Text="{Binding ConfirmPasswordError}"
                          IsVisible="{Binding ConfirmPasswordError, Converter={x:Static StringConverters.IsNotNullOrEmpty}}" />
            </StackPanel>

            <!-- æ“ä½œæŒ‰é’® -->
            <StackPanel Orientation="Horizontal" 
                       HorizontalAlignment="Center" 
                       Spacing="16"
                       Margin="0,16,0,0">
                <Button Padding="20,10" 
                       FontFamily="Microsoft YaHei"
                       FontSize="14"
                       Classes="accent" 
                       Command="{Binding SavePasswordCommand}" 
                       Content="ðŸ’¾ ä¿å­˜å¯†ç " 
                       IsEnabled="{Binding !IsSaving}"
                       MinWidth="120" />
                
                <Button Padding="20,10" 
                       FontFamily="Microsoft YaHei"
                       FontSize="14"
                       Command="{Binding CancelCommand}" 
                       Content="âŒ å–æ¶ˆ" 
                       IsEnabled="{Binding !IsSaving}"
                       MinWidth="120" />
            </StackPanel>

            <!-- çŠ¶æ€æ¶ˆæ¯ -->
            <Border Background="{DynamicResource SystemControlBackgroundAltMediumLowBrush}"
                   BorderBrush="{DynamicResource SystemControlForegroundBaseLowBrush}"
                   BorderThickness="1"
                   CornerRadius="6"
                   Padding="12,8"
                   IsVisible="{Binding StatusMessage, Converter={x:Static StringConverters.IsNotNullOrEmpty}}">
                <TextBlock FontFamily="Microsoft YaHei" 
                          FontSize="14" 
                          FontWeight="Medium"
                          HorizontalAlignment="Center"
                          Foreground="{DynamicResource SystemAccentColor}"
                          Text="{Binding StatusMessage}" />
            </Border>

            <!-- åŠ è½½æŒ‡ç¤ºå™¨ -->
            <StackPanel Orientation="Horizontal" 
                       HorizontalAlignment="Center"
                       Spacing="8"
                       IsVisible="{Binding IsSaving}">
                <TextBlock FontFamily="Microsoft YaHei" 
                          FontSize="14" 
                          Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}"
                          Text="â³ æ­£åœ¨å¤„ç†ï¼Œè¯·ç¨å€™..." />
            </StackPanel>

        </StackPanel>
    </Border>
</UserControl>
