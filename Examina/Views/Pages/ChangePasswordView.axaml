<UserControl x:Class="Examina.Views.Pages.ChangePasswordView" 
             xmlns="https://github.com/avaloniaui" 
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:vm="clr-namespace:Examina.ViewModels.Pages" 
             d:DesignHeight="500" 
             d:DesignWidth="450" 
             x:DataType="vm:ChangePasswordViewModel" 
             mc:Ignorable="d">

    <Border Background="{DynamicResource SystemControlBackgroundChromeMediumLowBrush}" 
            BorderBrush="{DynamicResource SystemControlForegroundBaseLowBrush}"
            BorderThickness="1"
            CornerRadius="12" 
            Padding="32"
            MaxWidth="400">
        <StackPanel Spacing="24">
            
            <!-- 标题 -->
            <StackPanel Spacing="8" HorizontalAlignment="Center">
                <TextBlock FontFamily="Microsoft YaHei" 
                          FontSize="24" 
                          FontWeight="Bold" 
                          HorizontalAlignment="Center"
                          Foreground="{DynamicResource SystemControlForegroundBaseHighBrush}" 
                          Text="🔒 修改密码" />
                <TextBlock FontFamily="Microsoft YaHei" 
                          FontSize="14" 
                          HorizontalAlignment="Center"
                          Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}" 
                          Text="为了您的账户安全，请设置一个强密码" />
            </StackPanel>

            <!-- 当前密码 -->
            <StackPanel Spacing="8">
                <TextBlock FontFamily="Microsoft YaHei"
                          FontSize="14"
                          FontWeight="Medium"
                          Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}"
                          Text="当前密码" />
                <TextBox FontFamily="Microsoft YaHei"
                        FontSize="14"
                        Height="40"
                        Padding="12,8"
                        PasswordChar="●"
                        Text="{Binding CurrentPassword}"
                        Watermark="请输入当前密码"/>
                <TextBlock FontFamily="Microsoft YaHei"
                          FontSize="12"
                          Foreground="Red"
                          Text="{Binding CurrentPasswordError}"
                          IsVisible="{Binding CurrentPasswordError, Converter={x:Static StringConverters.IsNotNullOrEmpty}}" />
                <TextBlock FontFamily="Microsoft YaHei"
                          FontSize="12"
                          Foreground="Green"
                          Text="✓ 支持验证当前密码，确保账户安全" />
            </StackPanel>

            <!-- 新密码 -->
            <StackPanel Spacing="8">
                <TextBlock FontFamily="Microsoft YaHei" 
                          FontSize="14" 
                          FontWeight="Medium"
                          Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}" 
                          Text="新密码" />
                <TextBox FontFamily="Microsoft YaHei" 
                        FontSize="14"
                        Height="40"
                        Padding="12,8"
                        PasswordChar="●"
                        Text="{Binding NewPassword}" 
                        Watermark="请输入新密码"/>
                <TextBlock FontFamily="Microsoft YaHei" 
                          FontSize="12" 
                          Foreground="Red" 
                          Text="{Binding NewPasswordError}"
                          IsVisible="{Binding NewPasswordError, Converter={x:Static StringConverters.IsNotNullOrEmpty}}" />
                <TextBlock FontFamily="Microsoft YaHei" 
                          FontSize="12" 
                          Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}" 
                          Text="密码长度6-20位，必须包含字母和数字" />
            </StackPanel>

            <!-- 确认新密码 -->
            <StackPanel Spacing="8">
                <TextBlock FontFamily="Microsoft YaHei" 
                          FontSize="14" 
                          FontWeight="Medium"
                          Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}" 
                          Text="确认新密码" />
                <TextBox FontFamily="Microsoft YaHei" 
                        FontSize="14"
                        Height="40"
                        Padding="12,8"
                        PasswordChar="●"
                        Text="{Binding ConfirmPassword}" 
                        Watermark="请再次输入新密码"/>
                <TextBlock FontFamily="Microsoft YaHei" 
                          FontSize="12" 
                          Foreground="Red" 
                          Text="{Binding ConfirmPasswordError}"
                          IsVisible="{Binding ConfirmPasswordError, Converter={x:Static StringConverters.IsNotNullOrEmpty}}" />
            </StackPanel>

            <!-- 操作按钮 -->
            <StackPanel Orientation="Horizontal" 
                       HorizontalAlignment="Center" 
                       Spacing="16"
                       Margin="0,16,0,0">
                <Button Padding="20,10" 
                       FontFamily="Microsoft YaHei"
                       FontSize="14"
                       Classes="accent" 
                       Command="{Binding SavePasswordCommand}" 
                       Content="💾 保存密码" 
                       IsEnabled="{Binding !IsSaving}"
                       MinWidth="120" />
                
                <Button Padding="20,10" 
                       FontFamily="Microsoft YaHei"
                       FontSize="14"
                       Command="{Binding CancelCommand}" 
                       Content="❌ 取消" 
                       IsEnabled="{Binding !IsSaving}"
                       MinWidth="120" />
            </StackPanel>

            <!-- 状态消息 -->
            <Border Background="{DynamicResource SystemControlBackgroundAltMediumLowBrush}"
                   BorderBrush="{DynamicResource SystemControlForegroundBaseLowBrush}"
                   BorderThickness="1"
                   CornerRadius="6"
                   Padding="12,8"
                   IsVisible="{Binding StatusMessage, Converter={x:Static StringConverters.IsNotNullOrEmpty}}">
                <TextBlock FontFamily="Microsoft YaHei" 
                          FontSize="14" 
                          FontWeight="Medium"
                          HorizontalAlignment="Center"
                          Foreground="{DynamicResource SystemAccentColor}"
                          Text="{Binding StatusMessage}" />
            </Border>

            <!-- 加载指示器 -->
            <StackPanel Orientation="Horizontal" 
                       HorizontalAlignment="Center"
                       Spacing="8"
                       IsVisible="{Binding IsSaving}">
                <TextBlock FontFamily="Microsoft YaHei" 
                          FontSize="14" 
                          Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}"
                          Text="⏳ 正在处理，请稍候..." />
            </StackPanel>

        </StackPanel>
    </Border>
</UserControl>
