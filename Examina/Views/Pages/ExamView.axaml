<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:vm="clr-namespace:Examina.ViewModels.Pages"
             mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="600"
             x:Class="Examina.Views.Pages.ExamView"
             x:DataType="vm:ExamViewModel">

  <ScrollViewer>
    <StackPanel Margin="24" Spacing="24">
      
      <!-- é¡µé¢æ ‡é¢˜ -->
      <TextBlock Text="{Binding PageTitle}" 
                 FontSize="28" 
                 FontWeight="Bold"
                 FontFamily="Microsoft YaHei"
                 Foreground="{DynamicResource SystemControlForegroundBaseHighBrush}"/>
      
      <!-- è€ƒè¯•çŠ¶æ€å¡ç‰‡ -->
      <Border Background="{DynamicResource SystemControlBackgroundChromeMediumLowBrush}"
              CornerRadius="12"
              Padding="24">
        <StackPanel Spacing="16">
          
          <!-- è€ƒè¯•çŠ¶æ€å›¾æ ‡å’Œæ ‡é¢˜ -->
          <StackPanel Orientation="Horizontal" Spacing="12">
            <TextBlock Text="ðŸ“‹" FontSize="32"/>
            <StackPanel VerticalAlignment="Center">
              <TextBlock Text="è€ƒè¯•çŠ¶æ€" 
                         FontSize="20" 
                         FontWeight="SemiBold"
                         FontFamily="Microsoft YaHei"
                         Foreground="{DynamicResource SystemControlForegroundBaseHighBrush}"/>
              <TextBlock Text="{Binding ExamStatus}" 
                         FontSize="14"
                         FontFamily="Microsoft YaHei"
                         Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}"/>
            </StackPanel>
          </StackPanel>
          
          <!-- è€ƒè¯•ä¿¡æ¯ï¼ˆå½“æœ‰æ­£åœ¨è¿›è¡Œçš„è€ƒè¯•æ—¶æ˜¾ç¤ºï¼‰ -->
          <StackPanel IsVisible="{Binding HasActiveExam}" Spacing="12">
            <Separator/>
            
            <Grid>
              <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
              </Grid.ColumnDefinitions>
              
              <StackPanel Grid.Column="0">
                <TextBlock Text="è€ƒè¯•åç§°" 
                           FontSize="12"
                           FontFamily="Microsoft YaHei"
                           Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}"/>
                <TextBlock Text="{Binding ExamName}" 
                           FontSize="16" 
                           FontWeight="SemiBold"
                           FontFamily="Microsoft YaHei"
                           Foreground="{DynamicResource SystemControlForegroundBaseHighBrush}"
                           Margin="0,4,0,0"/>
              </StackPanel>
              
              <StackPanel Grid.Column="1">
                <TextBlock Text="å‰©ä½™æ—¶é—´" 
                           FontSize="12"
                           FontFamily="Microsoft YaHei"
                           Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}"/>
                <TextBlock Text="{Binding RemainingTime}" 
                           FontSize="16" 
                           FontWeight="SemiBold"
                           FontFamily="Microsoft YaHei"
                           Foreground="{DynamicResource SystemAccentColor}"
                           Margin="0,4,0,0"/>
              </StackPanel>
            </Grid>
          </StackPanel>
          
          <!-- æ“ä½œæŒ‰é’® -->
          <StackPanel Orientation="Horizontal" Spacing="12" HorizontalAlignment="Center">
            <Button Content="{Binding StartExamButtonText}"
                    Command="{Binding StartExamCommand}"
                    IsVisible="{Binding !HasActiveExam}"
                    Padding="20,10"
                    FontFamily="Microsoft YaHei">
                <Button.Classes>
                    <Classes>
                        <Class Name="accent" IsActive="{Binding HasFullAccess}" />
                    </Classes>
                </Button.Classes>
            </Button>

            <Button Content="ç»§ç»­è€ƒè¯•"
                    Classes="accent"
                    Command="{Binding ContinueExamCommand}"
                    IsVisible="{Binding HasActiveExam}"
                    Padding="20,10"
                    FontFamily="Microsoft YaHei"/>

            <Button Content="åˆ·æ–°çŠ¶æ€"
                    Command="{Binding RefreshExamStatusCommand}"
                    Padding="20,10"
                    FontFamily="Microsoft YaHei"/>
          </StackPanel>
        </StackPanel>
      </Border>
      
      <!-- è€ƒè¯•è¯´æ˜Ž -->
      <Border Background="{DynamicResource SystemControlBackgroundChromeMediumLowBrush}"
              CornerRadius="8"
              Padding="20">
        <StackPanel Spacing="12">
          <TextBlock Text="è€ƒè¯•è¯´æ˜Ž" 
                     FontSize="18" 
                     FontWeight="SemiBold"
                     FontFamily="Microsoft YaHei"
                     Foreground="{DynamicResource SystemControlForegroundBaseHighBrush}"/>
          
          <StackPanel Spacing="8">
            <TextBlock Text="â€¢ è¯·ç¡®ä¿ç½‘ç»œè¿žæŽ¥ç¨³å®šï¼Œé¿å…è€ƒè¯•è¿‡ç¨‹ä¸­æ–­ç½‘" 
                       FontSize="14"
                       FontFamily="Microsoft YaHei"
                       Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}"/>
            <TextBlock Text="â€¢ è€ƒè¯•è¿‡ç¨‹ä¸­è¯·å‹¿å…³é—­åº”ç”¨ç¨‹åºæˆ–åˆ‡æ¢åˆ°å…¶ä»–ç¨‹åº" 
                       FontSize="14"
                       FontFamily="Microsoft YaHei"
                       Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}"/>
            <TextBlock Text="â€¢ è€ƒè¯•æ—¶é—´åˆ°åŽç³»ç»Ÿå°†è‡ªåŠ¨æäº¤ç­”æ¡ˆ" 
                       FontSize="14"
                       FontFamily="Microsoft YaHei"
                       Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}"/>
            <TextBlock Text="â€¢ å¦‚é‡æŠ€æœ¯é—®é¢˜è¯·åŠæ—¶è”ç³»ç›‘è€ƒè€å¸ˆ" 
                       FontSize="14"
                       FontFamily="Microsoft YaHei"
                       Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}"/>
          </StackPanel>
        </StackPanel>
      </Border>
      
    </StackPanel>
  </ScrollViewer>
</UserControl>
