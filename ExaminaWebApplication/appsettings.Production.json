{
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft.AspNetCore": "Warning",
      "Microsoft.EntityFrameworkCore": "Warning",
      "Microsoft.EntityFrameworkCore.Database.Command": "Error",
      "ExaminaWebApplication": "Information"
    },
    "Console": {
      "IncludeScopes": true,
      "LogLevel": {
        "Default": "Information",
        "Microsoft.AspNetCore": "Warning"
      }
    },
    "File": {
      "Path": "logs/examina-{Date}.log",
      "MinLevel": "Information",
      "LogLevel": {
        "Default": "Information"
      }
    }
  },

  "ConnectionStrings": {
    "DefaultConnection": "Server=localhost;Database=ExaminaDb;User=root;Password=Ke-~7Qs[t=f4q!A).;CharSet=utf8mb4;SslMode=Preferred;",
    "MySqlConnection": "Server=localhost;Database=ExaminaDb;User=root;Password=Ke-~7Qs[t=f4q!A).;CharSet=utf8mb4;SslMode=Preferred;",
    "ReadOnlyConnection": "Server=localhost;Database=ExaminaDb;User=root;Password=Ke-~7Qs[t=f4q!A).;CharSet=utf8mb4;SslMode=Preferred;"
  },

  "Jwt": {
    "SecretKey": "ExaminaSecretKeyI*T>zG,.Ky@0:KjTjs,6QN2/hEcOdSB+o1@GZIE=-I!-O}0zlx",
    "AccessTokenExpirationMinutes": 10080,
    "RefreshTokenExpirationDays": 30,
    "RequireHttpsMetadata": true,
    "ClockSkewMinutes": 2,
    "ValidateIssuerSigningKey": true,
    "ValidateIssuer": true,
    "ValidateAudience": true,
    "ValidateLifetime": true
  },

  "Cookie": {
    "ExpireTimeSpan": 480,
    "RequireHttps": true,
    "SameSite": "Strict",
    "SecurePolicy": "Always"
  },

  "Security": {
    "PasswordMinLength": 8,
    "PasswordRequireDigit": true,
    "PasswordRequireLowercase": true,
    "PasswordRequireUppercase": true,
    "PasswordRequireNonAlphanumeric": true,
    "MaxFailedLoginAttempts": 3,
    "LockoutTimeSpanMinutes": 30,
    "RequireEmailConfirmation": true,
    "RequirePhoneConfirmation": true
  },

  "DeviceSecurity": {
    "MaxDevicesPerStudent": 1,
    "MaxDevicesPerTeacher": 3,
    "MaxDevicesPerAdmin": 5,
    "DeviceBindingRequired": true,
    "DeviceTokenExpirationDays": 30,
    "TrustDeviceAfterDays": 7,
    "AllowDeviceUnbinding": false,
    "RequireDeviceApproval": true
  },

  "TencentSms": {
    "SDKAppID": "1401002302",
    "AppKey": "71810c9af89e7484fef3ac637974d407",
    "TemplateID": "2453935",
    "SignName": "石家庄炳烛教育",
    "SecretId": "AKIDfEbrZGn7HI6h9VrAGB8wZ0U6ZuGWdcbc",
    "SecretKey": "xc7g7NSiq14yhFf7QZYO2Vn5ED0fASYR",
    "Region": "ap-beijing",
    "Enabled": true,
    "CodeValidMinutes": 5,
    "SendIntervalSeconds": 60,
    "MaxDailyCount": 10,
    "MaxAttemptCount": 5,
    "RetryCount": 3,
    "RetryDelayMs": 1000
  },

  "WeChat": {
    "AppId": "wx41cdfae8482b1879",
    "AppSecret": "e32c1a09f91108720f14df6ab70f59ce",
    "Enabled": false
  },

  "SessionManagement": {
    "CleanupIntervalMinutes": 60,
    "InactiveSessionTimeoutMinutes": 480,
    "MaxConcurrentSessions": 3,
    "EnableSessionTracking": true
  },

  "Production": {
    "EnableDetailedErrors": false,
    "EnableSensitiveDataLogging": false,
    "ShowExceptionDetails": false,
    "EnableDeveloperExceptionPage": false,
    "EnableSwagger": false,
    "EnableCors": true,
    "UseHttpsRedirection": false,
    "UseHsts": false,
    "HstsMaxAge": 31536000,
    "EnableResponseCompression": true,
    "EnableResponseCaching": true
  },

  // 服务器配置
  "Kestrel": {
    "Endpoints": {
      "Http": {
        "Url": "http://localhost:8080"
      },
      "HttpAnyIP": {
        "Url": "http://*:5000"
      }
    }
  },

  "HealthChecks": {
    "Enabled": true,
    "DatabaseCheck": true,
    "MemoryCheck": true,
    "DiskSpaceCheck": true
  },

  "Performance": {
    "EnableResponseCaching": true,
    "CacheDurationSeconds": 300,
    "EnableOutputCaching": true,
    "MaxRequestBodySize": 524288000,
    "RequestTimeoutSeconds": 600
  },

  "AuditLog": {
    "Enabled": true,
    "LogLevel": "Information",
    "IncludeRequestBody": false,
    "IncludeResponseBody": false,
    "LogSensitiveData": false
  },

  // 文件上传配置 - 生产环境
  "FileUpload": {
    "MaxFileSize": 524288000,               // 500MB (字节)
    "MaxFileCount": 10,                     // 最大同时上传文件数量
    "AllowedExtensions": [
      ".zip", ".rar", ".7z",
      ".pdf", ".doc", ".docx", ".xls", ".xlsx", ".ppt", ".pptx",
      ".txt", ".rtf", ".json", ".xml",
      ".jpg", ".jpeg", ".png", ".gif", ".bmp",
      ".mp4", ".avi", ".mov", ".wmv",
      ".mp3", ".wav", ".wma"
    ],
    "AllowedMimeTypes": [
      "application/zip",
      "application/x-rar-compressed",
      "application/x-7z-compressed",
      "application/pdf",
      "application/msword",
      "application/vnd.openxmlformats-officedocument.wordprocessingml.document",
      "application/vnd.ms-excel",
      "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",
      "application/vnd.ms-powerpoint",
      "application/vnd.openxmlformats-officedocument.presentationml.presentation",
      "text/plain",
      "application/rtf",
      "application/json",
      "application/xml",
      "text/xml",
      "image/jpeg",
      "image/png",
      "image/gif",
      "image/bmp",
      "video/mp4",
      "video/x-msvideo",
      "video/quicktime",
      "video/x-ms-wmv",
      "audio/mpeg",
      "audio/wav",
      "audio/x-ms-wma"
    ],
    "UploadPath": "wwwroot/uploads",        // 上传目录路径
    "TempUploadPath": "wwwroot/uploads/temp", // 临时上传目录路径
    "EnableHashValidation": true,           // 是否启用文件哈希验证
    "EnableVirusScanning": false,           // 是否启用病毒扫描
    "FileRetentionDays": 0,                 // 文件保留天数（0表示永久保留）
    "EnableCompression": false,             // 是否启用文件压缩
    "CompressionQuality": 85                // 压缩质量（1-100）
  }
}
