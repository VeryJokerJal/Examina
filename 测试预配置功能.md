# 测试预配置功能

## 数据库迁移状态
✅ 迁移 `20250816153359_CreatePreConfiguredUsersTable` 已成功应用
✅ PreConfiguredUsers 表已在数据库中创建

## 测试步骤

### 1. 验证表结构
访问数据库管理工具，确认 `PreConfiguredUsers` 表包含以下字段：
- Id (主键，自增)
- Username (varchar(50), 非空)
- PhoneNumber (varchar(20), 可空)
- RealName (varchar(100), 可空)
- StudentId (varchar(50), 可空)
- OrganizationId (int, 非空)
- CreatedAt (datetime, 非空)
- CreatedBy (int, 非空)
- IsApplied (bool, 默认false)
- AppliedAt (datetime, 可空)
- AppliedToUserId (int, 可空)
- Notes (varchar(500), 可空)

### 2. 测试批量添加功能
1. 访问组织详情页面：`https://localhost:7125/Admin/Organization/Details/2`
2. 点击"批量添加手机号"按钮
3. 输入测试数据：
   ```
   阿松大,13800138000
   测试用户,13900139000
   ```
4. 提交并观察结果

### 3. 预期结果
- 对于不存在的用户（如"阿松大"），应该创建预配置记录
- 返回消息应显示预配置用户数量
- 不应再出现表不存在的错误

### 4. 验证预配置记录
在数据库中查询 PreConfiguredUsers 表，确认记录已创建：
```sql
SELECT * FROM PreConfiguredUsers WHERE Username = '阿松大';
```

### 5. 测试自动关联（可选）
1. 创建用户名为"阿松大"的新用户
2. 使用邀请码加入组织
3. 检查用户信息是否自动填充了预配置的手机号
4. 确认预配置记录的 IsApplied 字段为 true
